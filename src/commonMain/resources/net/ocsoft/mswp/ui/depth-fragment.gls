precision mediump float;

/**
 * float to vector4
 */
vec4
floatToVec4(
    float value);

void main() {
    gl_FragColor = floatToVec4(gl_FragCoord.z);
}

/**
 * float to vector4
 */
vec4
floatToVec4(
    float value)
{
    vec4 result;
    vec4 tmpVec;
    float tmpVal; 
    tmpVal = value;
    // color component resolution is 4 bits (0xf).
    // It was specified by WebGLRenderingContext.RGBA4 
    for (int i = 0; i < 4; i++) {
        tmpVec[i] = tmpVal;
        tmpVal = fract(tmpVal * float(0xf));
    }
    for (int i = 1; i < 2; i++) {
        result[i - 1] = tmpVec[i - 1] - tmpVec[i] / float(0xf);
    }

    result[3] = tmpVec[3];
    return result;
}

// vi: se ts=4 sw=4 et:
